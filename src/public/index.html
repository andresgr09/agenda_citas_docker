<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citas | Migración Colombia</title>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="icon" href="./images/favico.png" type="image/png">
    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.min.js" defer></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Flatpickr CSS -->
    <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./styles/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
</head>

<body class="bg-gray-100" x-data="{ open: true }">
    <div class="container mx-auto p-4">
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <div class="flex justify-center mb-4">
                <img src="./images/logo-migracion-colombia.png" alt="Logo" class="h-25">
            </div>
            <h1 class="text-2xl font-bold mb-4 text-center">Agendamiento de Citas</h1>
            <form id="consulta-form" class="space-y-4">
                <div>
                    <label for="city" class="block text-sm font-medium text-gray-700">Ciudad:</label>
                    <select id="city" name="city"
                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                        required>
                        <option value="">Seleccione una ciudad</option>
                        <option value="ARAUCA">ARAUCA</option>
                        <option value="ARMENIA">ARMENIA</option>
                        <option value="BARRANQUILLA">BARRANQUILLA</option>
                        <option value="BOGOTA DC">BOGOTÁ DC</option>
                        <option value="BUCARAMANGA">BUCARAMANGA</option>
                        <option value="BUENAVENTURA">BUENAVENTURA</option>
                        <option value="CALI">CALI</option>
                        <option value="CARTAGENA DE INDIAS">CARTAGENA DE INDIAS</option>
                        <option value="CÚCUTA">CÚCUTA</option>
                        <option value="IBAGUÉ">IBAGUÉ</option>
                        <option value="INIRIDA">INIRIDA</option>
                        <option value="LETICIA">LETICIA</option>
                        <option value="MAICAO">MAICAO</option>
                        <option value="MANIZALES">MANIZALES</option>
                        <option value="MEDELLIN">MEDELLÍN</option>
                        <option value="MONTERÍA">MONTERÍA</option>
                        <option value="NEIVA">NEIVA</option>
                        <option value="PASTO">PASTO</option>
                        <option value="PEREIRA">PEREIRA</option>
                        <option value="POPAYÁN">POPAYÁN</option>
                        <option value="PROVIDENCIA Y SANTA CATALINA">PROVIDENCIA Y SANTA CATALINA</option>
                        <option value="PUERTO CARREÑO">PUERTO CARREÑO</option>
                        <option value="PUERTO LEGUÍZAMO">PUERTO LEGUÍZAMO</option>
                        <option value="QUIBDÓ">QUIBDÓ</option>
                        <option value="RIOHACHA">RIOHACHA</option>
                        <option value="RUMICHACA">RUMICHACA</option>
                        <option value="SAN ANDRÉS">SAN ANDRÉS</option>
                        <option value="SANTA MARTA">SANTA MARTA</option>
                        <option value="SINCELEJO">SINCELEJO</option>
                        <option value="TUMACO">TUMACO</option>
                        <option value="TUNJA">TUNJA</option>
                        <option value="VALLEDUPAR">VALLEDUPAR</option>
                        <option value="VILLAVICENCIO">VILLAVICENCIO</option>
                        <option value="YOPAL">YOPAL</option>
                    </select>
                </div>
                <div>
                    <label for="tramite" class="block text-sm font-medium text-gray-700">Trámite:</label>
                    <select id="tramite" name="tramite"
                    class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                    required>
                    <option value="">Seleccione un trámite</option>
                    <option value="ATENCIÓN SIRE">ATENCIÓN SIRE</option>
                    <option value="CÉDULA EXTRANJERÍA">CÉDULA EXTRANJERÍA</option>
                    <option value="CERTIFICADO DE MOVIMIENTOS MIGRATORIOS">CERTIFICADO DE MOVIMIENTOS MIGRATORIOS</option>
                    <option value="DUPLICADO PPT - PÉRDIDA - HURTO">DUPLICADO PPT - PÉRDIDA - HURTO</option>
                    <option value="PROCESO ADMINISTRATIVO - PERSONA NATURAL">PROCESO ADMINISTRATIVO - PERSONA NATURAL</option>
                    <option value="REEXPEDICIÓN DE PPT - CORRECCIÓN INFORMACIÓN">REEXPEDICIÓN DE PPT - CORRECCIÓN INFORMACIÓN</option>
                    <option value="REGISTRO DE VISA">REGISTRO DE VISA</option>
                    <option value="SALVOCONDUCTO">SALVOCONDUCTO</option>
                </select>
                </div>
                <div>
                    <label for="fecha" class="block text-sm font-medium text-gray-700">Fecha de la cita:</label>
                    <input id="fecha" type="text"
                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                        placeholder="Seleccione una fecha" required>
                </div>
                <button type="submit"
                    class="block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Consultar
                    cita</button>
            </form>

            <!-- Contenedor para los resultados -->
            <div id="resultados" class="mt-4">
                <h2 class="text-xl font-bold mb-4">Horas disponibles:</h2>
                <div id="horas-disponibles" class="grid grid-cols-3 gap-4">
                    <!-- Aquí se mostrarán los botones de las horas -->
                </div>
            </div>
        </div>
    </div>

    <!-- Main modal -->
    <div id="modal" x-show="open" class="fixed inset-0 flex items-center justify-center z-50">
        <div class="relative p-4 w-full max-w-2xl max-h-full">
            <!-- Modal content -->
            <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                <!-- Modal header -->
                <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                        Bienvenido
                    </h3>
                    <button id="close-modal" @click="open = false" type="button"
                        class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white">
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                        </svg>
                        <span class="sr-only">Close modal</span>
                    </button>
                </div>
                <!-- Modal body -->
                <div class="p-4 md:p-5 space-y-4">
                    <div class="flex justify-center">
                        <img src="./images/logo-migracion-colombia.png" alt="Imagen de bienvenida" class="h-22">
                    </div>
                    <p class="text-base leading-relaxed text-gray-500 dark:text-gray-400">
                        ATENCIÓN: El agendamiento de citas en los Centros Facilitadores de Servicios Migratorios y
                        Puestos de Control Migratorio,
                        aplica solo para personas naturales y para personas jurídicas en procesos administrativos.
                        <br><br>
                        No se prestará atención si los datos del ciudadano o la persona jurídica no concuerdan con la
                        cita agendada.
                        La confirmación de su cita se enviará al correo electrónico
                    </p>
                </div>
                <!-- Modal footer -->
                <div class="flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600">
                    <button @click="open = false" type="button"
                        class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Formulario modal -->
    <div id="modal-overlay" class="modal-overlay"></div>
    <div id="form-modal" class="form-container">
        <h2>Formulario de Registro</h2>
        <form id="form-modal-form" action="/api/guardar-cita" method="POST">
            <input type="hidden" id="citaId" name="citaId">
            <div class="form-group">
                <label for="tipoDoc">Tipo Documento</label>
                <select id="tipoDoc" name="tipoDoc" required>
                    <option value="">Seleccionar tipo de documento</option>
                    <option value="cc">CÉDULA DE CIUDADANÍA</option>
                    <option value="ce">CÉDULA DE EXTRANJERÍA</option>
                    <option value="cv">CÉDULA VENEZOLANA</option>
                    <option value="dni">DNI - DOCUMENTO NACIONAL DE IDENTIFICACIÓN</option>
                    <option value="nit">NIT (Persona Jurídica)</option>
                    <option value="pasaporte">PASAPORTE</option>
                    <option value="ppt">PPT - PERMISO POR PROTECCIÓN TEMPORAL </option>
                </select>
            </div>
            <div class="form-group">
                <label for="nombres">Nombres y Apellidos</label>
                <input type="text" id="nombres" name="nombres" placeholder="Ingrese sus nombres y apellidos" required pattern="[A-Za-z\s]+" title="Solo se permiten letras mayúsculas y minúsculas, sin acentos ni caracteres especiales">
            </div>
            <div class="form-group">
                <label for="numIdentificacion">Número de Identificación</label>
                <input type="text" id="numIdentificacion" name="numIdentificacion" placeholder="Ingrese su número de identificación" required pattern="[A-Z0-9]+" title="Solo se permiten letras mayúsculas y números">
            </div>
            <div class="form-group">
                <label for="fechaNacimiento">Fecha de Nacimiento</label>
                <input type="date" id="fechaNacimiento" name="fechaNacimiento" required>
            </div>
            <div class="form-group">
                <label for="genero">Género</label>
                <select id="genero" name="genero" required>
                    <option value="">Seleccione un género</option>
                    <option value="masculino">MASCULINO</option>
                    <option value="femenino">FEMENINO</option>
                    <option value="otro">OTRO</option>
                </select>
            </div>
            <div class="form-group">
                <label for="correo">Correo Electrónico</label>
                <input type="email" id="correo" name="correo" placeholder="Ingrese su correo" required>
            </div>
            <div class="form-group">
                <label for="confirmarCorreo">Confirmar Correo Electrónico</label>
                <input type="email" id="confirmarCorreo" name="confirmarCorreo" placeholder="Confirme su correo" required>
            </div>
            <div class="form-group">
                <label for="telefono">Teléfono</label>
                <input type="tel" id="telefono" name="telefono" placeholder="Ingrese su teléfono" required pattern="\d{10}" title="Debe contener 10 dígitos">
            </div>
            <button type="submit" class="form-button">Agendar</button>
            <div class="dx-field-item-custom-label-content">
                <input type="checkbox" name="" id="" required>
                <span>He leído y aceptado la política de tratamiento de datos personales.</span>
                <a href="https://www.migracioncolombia.gov.co/politicas/" target="_blank">Ver más</a>
            </div>
        </form>
    </div>

    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script type="module" src="./scripts/scripts.js"></script>
   

</body>
</html>